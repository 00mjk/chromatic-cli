const DEFAULT_SERVER_PORT = 3004;
const DEFAULT_INDEX_URL = 'https://index.chromaticqa.com';
const DEFAULT_TUNNEL_URL = 'https://tunnel.chromaticqa.com';
const DEFAULT_CREATE_TUNNEL = 'true';
const DEFAULT_RETRIES = 5;
const DEFAULT_POLL_INTERVAL = 1000;
const DEFAULT_TIMEOUT = 5 * 60 * 1000;

const e = process.env;

const { LOGGLY_CUSTOMER_TOKEN = 'b5e26204-cdc5-4c78-a9cc-c69eb7fabad3' } = e;

const CHROMATIC_SERVER_PORT =
  e.CHROMATIC_SERVER_PORT || e.CHROMA_SERVER_PORT || DEFAULT_SERVER_PORT;
const CHROMATIC_INDEX_URL = e.CHROMATIC_INDEX_URL || e.CHROMA_INDEX_URL || DEFAULT_INDEX_URL;
const CHROMATIC_TUNNEL_URL = e.CHROMATIC_TUNNEL_URL || e.CHROMA_TUNNEL_URL || DEFAULT_TUNNEL_URL;
const CHROMATIC_CREATE_TUNNEL =
  e.CHROMATIC_CREATE_TUNNEL || e.CHROMA_CREATE_TUNNEL || DEFAULT_CREATE_TUNNEL;
const CHROMATIC_APP_CODE = e.CHROMATIC_APP_CODE || e.CHROMA_APP_CODE;
const CHROMATIC_RETRIES = e.CHROMATIC_RETRIES || e.CHROMA_RETRIES || DEFAULT_RETRIES;
const CHROMATIC_POLL_INTERVAL =
  e.CHROMATIC_POLL_INTERVAL || e.CHROMA_POLL_INTERVAL || DEFAULT_POLL_INTERVAL;
const CHROMATIC_TIMEOUT = e.CHROMATIC_TIMEOUT || e.CHROMA_TIMEOUT || DEFAULT_TIMEOUT;
const CHROMATIC_STORYBOOK_VERSION = e.CHROMATIC_STORYBOOK_VERSION || e.CHROMA_STORYBOOK_VERSION;

const ENVIRONMENT_WHITELIST = [/^GERRIT/, /^TRAVIS/];

const STORYBOOK_CLI_FLAGS_BY_VERSION = {
  '--ci': '4.0.0',
  '--loglevel': '5.1.0',
};

export {
  CHROMATIC_SERVER_PORT,
  CHROMATIC_INDEX_URL,
  CHROMATIC_TUNNEL_URL,
  CHROMATIC_CREATE_TUNNEL,
  CHROMATIC_APP_CODE,
  CHROMATIC_RETRIES,
  CHROMATIC_POLL_INTERVAL,
  CHROMATIC_TIMEOUT,
  CHROMATIC_STORYBOOK_VERSION,
  LOGGLY_CUSTOMER_TOKEN,
  STORYBOOK_CLI_FLAGS_BY_VERSION,
  ENVIRONMENT_WHITELIST,
};
